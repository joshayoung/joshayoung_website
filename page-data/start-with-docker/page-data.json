{"componentChunkName":"component---src-templates-post-js","path":"/start-with-docker","result":{"data":{"markdownRemark":{"html":"<p>Before I embark on the road to explain docker, I want to define a few concepts. In the docker world, we have two structures: <em>images</em> and <em>containers</em>. At the base level, you can download (pull) an image from the <a href=\"https://hub.docker.com\">hub.docker.com</a>, and use it to build a container.</p>\n<h4>Pull a Image:</h4>\n<ul>\n<li><code>docker pull postgres</code></li>\n<li>You will see something like this on your command line:</li>\n</ul>\n<pre><code class=\"language-bash\">Using default tag: latest\nlatest: Pulling from library/postgres\nDigest: sha256:ce0f6c28b5869ff166714d5ff9702e38b00f81ad348c6\n</code></pre>\n<ul>\n<li>This will provide an image on your local machine for use with building a container.</li>\n</ul>\n<h4>View Local Image:</h4>\n<ul>\n<li>You can run the <code>docker image</code> command to see this image on your local system:</li>\n<li><code>docker image ls | grep postgres</code></li>\n</ul>\n<h4>Build a Container:</h4>\n<ul>\n<li>From here we can create a container with the <code>docker run</code> command:</li>\n<li><code>docker run --name postgres_cont --rm -e POSTGRES_PASSWORD=password -d postgres</code>\n<ul>\n<li><code>--name</code> will name my container.</li>\n<li><code>--rm</code> tells my container to delete the container when it stops running.\n<ul>\n<li>Otherwise, my system will potentially build up a whole bunch of containers that use the same image.</li>\n</ul>\n</li>\n<li><code>-e</code> will pass environmental values to my container.\n<ul>\n<li>In this case, Docker Hub's explanation for the postgres container says that the <code>POSTGRES_PASSWORD</code> is required for this image.</li>\n</ul>\n</li>\n<li><code>-d</code> tells the container to run in the background.</li>\n<li><code>postgres</code> tells my container which image to use.</li>\n</ul>\n</li>\n<li>Now, I have a container named 'postgres_cont' on my local machine.\n<ul>\n<li><code>docker container ls | grep postgres_cont</code></li>\n</ul>\n</li>\n</ul>\n<h4>Start and Connect to a Container:</h4>\n<ul>\n<li>I can start the container with a run command and then connect to a shell session by running a command similar to this:</li>\n<li><code>docker run --name postgres_cont --rm -it -e POSTGRES_PASSWORD=password postgres bash</code>\n<ul>\n<li><code>-it</code> says to start an interactive terminal that stays open.</li>\n<li><code>bash</code> tells my container to run the bash shell.\n<ul>\n<li>In some cases, the image will not be based off of an image that includes bash, so you would have to use <code>/bin/sh</code> instead.</li>\n<li>From inside this shell we could then interact with or database via <code>psql</code>.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>We could also start an interactive shell session inside the container directly with the postgres terminal:</li>\n<li><code>docker run --name postgres_cont --rm -it -e POSTGRES_PASSWORD=password postgres psql -U postgres</code>\n<ul>\n<li><code>postgres psql -U postgres</code> is saying when you attach to this container run <code>psql</code> and connect with the <code>postgres</code> user.</li>\n</ul>\n</li>\n</ul>\n<h4>Connect to a Running Container:</h4>\n<ul>\n<li>I can connect to a running container by running the <code>exec</code> command.\n<ul>\n<li>This container could have been started by using <code>run</code> with the <code>-d</code> flag or it could have been started by running <code>docker-compose up</code>.</li>\n</ul>\n</li>\n<li><code>docker exec -it postgres_cont bash</code>\n<ul>\n<li><code>-it</code> says to start an interactive terminal that stays open.</li>\n<li><code>postgres_cont</code> is my container name.</li>\n<li><code>bash</code> is the process I want to use when I attach to my container.</li>\n<li>This will give me an interactive terminal session within the container where I can run postgres commands.</li>\n</ul>\n</li>\n</ul>\n<h4>Connect to the Container from the Host:</h4>\n<ul>\n<li>If I want to connect to my container from my host machine, I will need to expose the container's port to my host.</li>\n<li><code>docker run --name postgres_cont -p 5432:5432 -e POSTGRES_PASSWORD=password -d postgres</code></li>\n<li>Now instead of having to connect to my running container via the command line, I can use any postgres GUI and connect to my database from my host machine on port 5432.</li>\n</ul>","frontmatter":{"date":"June 15, 2020","path":"/start-with-docker","title":"Start with Docker"}}},"pageContext":{}},"staticQueryHashes":["305197398"]}