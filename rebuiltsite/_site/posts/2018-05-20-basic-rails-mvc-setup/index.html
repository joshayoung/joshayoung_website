
<!doctype html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <heaer>
            <h1>Basic Rails MVC Setup</h1>
        </heaer>
    </body>
    <main>
<p>I wrote this post to describe the basic rails setup to get a simple CRUD application going. Of course this can be greatly improved upon, but I thought it would be helpful to outline the basic structure. I will outline each file with a simple explanation for each one. To initialize a project list this, you would need to have rails 5 installed and create a new project with the <code>rails new [project name]</code> command.</p>
<h4>Create the Database and Model</h4>
<pre><code class="language-bash">  # Creates the initial ruby project files:
  rails new notes

  # Creates the migration and model file:
  rails g model note subject:string, body:string

  # Runs the migration to create the database:
  rails db:migrate
</code></pre>
<h4>Add validation to model file</h4>
<pre><code class="language-ruby">  # app/models/note.rb
  class Note &lt; ApplicationRecord
    validates :subject, :body, presence: true
  end
</code></pre>
<h4>Create the Controller</h4>
<pre><code class="language-ruby">  # Creates an empty controller file:
  rails g controller notes
</code></pre>
<h4>Setup the route file</h4>
<pre><code class="language-ruby">  # config/routes.rb
  Rails.application.routes.draw do
    root    'notes#index'
    get     'notes'           =&gt; 'notes#index', as: 'notes'
    post    'notes'           =&gt; 'notes#create'
    get     'notes/new'       =&gt; 'notes#new',   as: 'new_note'
    get     'notes/:id/edit'  =&gt; 'notes#edit',  as: 'edit_note'
    get     'notes/:id'       =&gt; 'notes#show',  as: 'note'
    patch   'notes/:id'       =&gt; 'notes#update'
    put     'notes/:id'       =&gt; 'notes#update'
    delete  'notes/:id'       =&gt; 'notes#destroy'
  end
</code></pre>
<h4>Populate the Controller with the needed logic</h4>
<pre><code class="language-ruby">  # app/controllers/notes_controller.rb
  class NotesController &lt; ApplicationController

    def index
      @notes = Note.all
    end

    def create
      @note = Note.new(subject: params[:note][:subject], body: params[:note][:body])
      if @note.save
        redirect_to notes_url
      else
        render :new
      end
    end

    def new
      @note = Note.new
    end

    def edit
      @note = Note.find_by(id: params[:id])
    end

    def show
      @note = Note.find(params[:id])
    end

    def update
      note = Note.find(params[:id])
      note.update(subject: params[:note][:subject], body: params[:note][:body])
      redirect_to(notes_url)
    end

    def destroy
      Note.find(params[:id]).destroy
      redirect_to(notes_url)
    end
  end
</code></pre>
<h4>Setup <code>simple_form_for</code></h4>
<p><a href="https://github.com/plataformatec/simple_form">Simple Form</a></p>
<p>Add <code>gem 'simple_form'</code> to your <code>Gemfile</code> and then run <code>bundle install</code>, followed by <code>rails generate simple_form:install</code>. If you had already started the rails server <code>rails s</code>, you will need to stop it and then restart the server to use the new form method.</p>
<h4>Setup the Views and Partials</h4>
<p>Of course all of these files would have to be manually created in the project folders under /views and /views/shared, respectively. The files that begin with an underscore are usually stored in the shared folder. Even though they are named with an underscore, they are included in the view pages using the <code>render</code> method without the underscore, as shown below.</p>
<h5>app/views/notes/index.html.erb</h5>
<pre><code class="language-html">&lt;h1&gt;Notes List&lt;/h1&gt;

&lt;ul&gt;
  &lt;% @notes.each do |note| %&gt;
  &lt;li&gt;&lt;%= link_to(note.subject, note_path(note)) %&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>
<h5>app/views/notes/new.html.erb</h5>
<pre><code class="language-html">&lt;h1&gt;Add New Note&lt;/h1&gt;

&lt;%= render 'shared/errors' %&gt; &lt;%= render 'shared/form' %&gt;
</code></pre>
<h5>app/views/notes/edit.html.erb</h5>
<pre><code class="language-html">&lt;h1&gt;Edit&lt;/h1&gt;

&lt;%= render 'shared/errors' %&gt; &lt;%= render 'shared/form' %&gt;
</code></pre>
<h5>app/views/notes/show.html.erb</h5>
<pre><code class="language-html">&lt;h1&gt;&lt;%= @note.subject %&gt;&lt;/h1&gt;
&lt;p&gt;&lt;%= @note.body %&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;%= link_to('Edit Note', edit_note_path(@note)) %&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;%= link_to 'Delete', @note, method: :delete, data: { confirm: 'Click &quot;OK&quot;
    to proceed.' } %&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<h5>app/views/shared/_errors.html.erb</h5>
<pre><code class="language-html">&lt;% if @note.errors.any? %&gt;
&lt;ul&gt;
  &lt;% @note.errors.full_messages.each do |error| %&gt;
  &lt;li&gt;&lt;%= error %&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
&lt;% end%&gt;
</code></pre>
<h5>app/views/shared/_form.html.erb</h5>
<pre><code class="language-html">&lt;%= simple_form_for @note do |f| %&gt; &lt;%= f.input :subject, label: 'Subject' %&gt;
&lt;%= f.input :body, label: 'Body' %&gt; &lt;%= f.button :submit %&gt; &lt;% end %&gt;
</code></pre>
<p>I have included the code for this mvc application in this <a href="https://github.com/joshayoung/basic-rails-mvc'%3Ebasic-rails-mvc">repo</a></p>
 blas
    </main>
</html>
